{
    "variables": {
        "name": "Windows-2012R2-Test",
        "aws_reza_access_key" : "",
        "aws_reza_secret_access_key" : "",
        "vpc_id" : "",
        "subnet_id" : ""
    },
    "builders": [
        {
            "type": "amazon-ebs",
            "ami_name": "test-windows-2012-packer-reza {{timestamp | clean_ami_name}}",
            "access_key" : "{{user `aws_reza_access_key`}}",
            "secret_key" : "{{user `aws_reza_secret_access_key`}}",
            "ssh_keypair_name" : "Reza-Oregon-Key",
            "ssh_private_key_file" : "C:/Users/rezaa/Documents/Keys/Reza-Oregon-Key.pem",
            "region" : "us-west-2",
            "source_ami" : "ami-03833dcc7d9010c5a",
            "instance_type" : "t2.medium",
            "associate_public_ip_address" : "true",
            "vpc_id" : "{{user `vpc_id`}}",
            "subnet_id" : "{{user `subnet_id`}}",
            "temporary_security_group_source_cidr" : "0.0.0.0/0",
            "communicator": "winrm",
            "user_data_file":"scripts/EC2_UserData_HTTP.ps1",
            "winrm_username": "Administrator",
            "winrm_timeout": "12h",
            "winrm_use_ssl" : false,
            "winrm_insecure" : true,
            "winrm_port" : "5985",
            "tags": {
                "Name" : "Packer Windows 2012",
                "OS_Version": "Windows 2012 R2",
                "Release": "Latest",
                "Base_AMI_Name": "{{ .SourceAMIName }}",
                "Extra": "{{ .SourceAMITags.TagName }}",
                "Purepose" : "Packer Testing",
                "Timestamp" : "{{timestamp}}",
                "Hoomann" : "Reza Ambler"
            }
        }
    ],
    "provisioners": [
        {
          "type": "powershell",
          "script": "scripts/Install-Chocolatey.ps1"
        }
    ],
    "post-processors": [
    ]
}